include/master-slave.inc
[connection master]
drop table if exists t1;
create table t1(a int not null primary key auto_increment, b varchar(256), key second(b)) engine=innodb;
insert into t1 values (1, REPEAT("a", 256));
insert into t1 values (2, REPEAT("a", 256));
optimize table t1;
Table	Op	Msg_type	Msg_text
test.t1	optimize	status	OK
drop table t1;
show binlog events in 'master-bin.000001' from 314;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	314	Gtid	1	352	GTID 0-1-1
master-bin.000001	352	Query	1	466	use `test`; DROP TABLE IF EXISTS `t1` /* generated by server */
master-bin.000001	466	Gtid	1	504	GTID 0-1-2
master-bin.000001	504	Query	1	670	use `test`; create table t1(a int not null primary key auto_increment, b varchar(256), key second(b)) engine=innodb
master-bin.000001	670	Gtid	1	708	BEGIN GTID 0-1-3
master-bin.000001	708	Table_map	1	752	table_id: # (test.t1)
master-bin.000001	752	Write_rows_v1	1	1044	table_id: # flags: STMT_END_F
master-bin.000001	1044	Xid	1	1071	COMMIT /* XID */
master-bin.000001	1071	Gtid	1	1109	BEGIN GTID 0-1-4
master-bin.000001	1109	Table_map	1	1153	table_id: # (test.t1)
master-bin.000001	1153	Write_rows_v1	1	1445	table_id: # flags: STMT_END_F
master-bin.000001	1445	Xid	1	1472	COMMIT /* XID */
master-bin.000001	1472	Gtid	1	1510	GTID 0-1-5
master-bin.000001	1510	Query	1	1590	use `test`; optimize table t1
master-bin.000001	1590	Gtid	1	1628	GTID 0-1-6
master-bin.000001	1628	Query	1	1732	use `test`; DROP TABLE `t1` /* generated by server */
include/rpl_end.inc
